(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/2.29802a19.jpg"},,,,,,,,,function(e,t,n){},,,,function(e,t,n){e.exports=n.p+"static/media/YUI-again.4baf056b.mp3"},function(e,t,n){e.exports=n.p+"static/media/YUI-GLORIA.d4c01ef7.mp3"},function(e,t,n){e.exports=n.p+"static/media/1.6792ad5f.jpg"},,,function(e,t,n){e.exports=n.p+"static/media/banner1.0c633b0b.jpg"},function(e,t,n){e.exports=n.p+"static/media/banner2.72e9767e.jpg"},function(e,t,n){e.exports=n.p+"static/media/banner3.9789bce3.jpg"},,function(e,t,n){e.exports=n(81)},,,,,function(e,t,n){},,function(e,t,n){},,,,,,function(e,t,n){},,function(e,t,n){},,,,,,function(e,t,n){},,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(27),r=n.n(s),c=(n(44),n(84)),o=n(83),l=(n(46),n(20)),u=n(10),p={audio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_AUDIO":return t.audio;default:return e}},currentSong:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object(u.a)({},e);switch(t.type){case"PLAY_SONG":return n=t.song,console.log(n),n;case"PROGRESS_MOVE":return n.percent=t.percent,n;case"CHANGE_SONG_STATUS":return n.isPlaying=t.status,n;case"CHANGE_PERCENT":return n.percent=t.percent,n;case"SET_SONG_URL":return n.songUrl=t.songUrl,n;default:return e}},songList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=Object(l.a)(e);switch(t.type){case"ADD_SONG_TO_PLAY_LIST":return[].concat(Object(l.a)(e),[t.song]);case"REPLACE_PLAY_LIST":return t.list;case"DELETE_SONG_FROM_PLAY_LIST":var a=e.findIndex(function(e,n){return e.id===t.id});return n.splice(a,1),n;case"DELETE_ALL":return[];default:return e}},playMode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PLAY_MODE":return t.mode;default:return e}},searchList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH_list":return t.list;default:return e}},failArmy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FAIL_ARMY":return t.list;default:return e}},failArmyInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=Object(u.a)({},e);switch(t.type){case"SET_FAIL_ARMY_INFO":return t.info;case"SET_FAIL_ARMY_SONG_LIST":return n.songList=t.list,console.log(n),n;default:return e}},showPlayList:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SHOW_PLAY_LIST":return console.log(t.isShow),t.isShow;default:return e}},showPlayBar:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SHOW_PLAY_BAR":return console.log(t.isShow),t.isShow;default:return e}},match:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1];return e},location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1];return e},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1];return e},staticContext:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1];return e},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1];return e}},m=n(13),h=n(28),g=n(11),f={searchSong:"https://c.y.qq.com/soso/fcgi-bin/client_search_cp",getFailArmy:"http://i.y.qq.com/s.plcloud/fcgi-bin/fcg_get_diss_by_tag.fcg",getFailArmyInfo:"http://i.y.qq.com/qzone-music/fcg-bin/fcg_ucc_getcdinfo_byids_cp.fcg",getSongInfo:"",getTop100:"https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg?g_tk=5381&uin=0&format=json&inCharset=utf-8&outCharset=utf-8\xacice=0&platform=h5&needNewCode=1&tpl=3&page=detail&type=top&topid=27&_=1519963122923",getSongRandom:"https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg?g_tk=5381&uin=0&format=json&inCharset=utf-8&outCharset=utf-8\xacice=0&platform=h5&needNewCode=1&tpl=3&page=detail&type=top&topid=36&_=1520777874472",getSongToken:"https://c.y.qq.com/base/fcgi-bin/fcg_music_express_mobile3.fcg"},d="http://y.qq.com/";function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t){var a=[];Object.keys(t).forEach(function(e){return a.push(e+"="+t[e])}),-1===e.search(/\?/)?e+="?"+a.join("&"):e+="&"+a.join("&")}return n.headers=Object(u.a)({},n.headers,{referrer:d}),fetch(e,Object(u.a)({methods:"GET"},n)).then(function(e){return e.text()})}var v={getFailArmy:function(e,t){var n;return e=Object(u.a)({},e,(n={categoryId:"10000000",sortId:"1",sin:"0",ein:"49",format:"jsonp",g_tk:"5381",loginUin:"0"},Object(g.a)(n,"format","jsonp"),Object(g.a)(n,"hostUin","0"),Object(g.a)(n,"inCharset","GB2312"),Object(g.a)(n,"outCharset","utf-8"),Object(g.a)(n,"notice","0"),Object(g.a)(n,"platform","yqq"),Object(g.a)(n,"jsonpCallback","MusicJsonCallback"),Object(g.a)(n,"needNewCode","0"),n)),b(f.getFailArmy,e,t)},getFailArmyInfo:function(e,t){return e=Object(u.a)({},e,{type:"1",json:"1",utf8:"1",onlysong:"0",nosign:"1",g_tk:"5381",loginUin:"0",hostUin:"0",format:"jsonp",inCharset:"GB2312",outCharset:"utf-8",notice:"0",platform:"yqq",needNewCode:"0",jsonpCallback:"jsonCallback"}),b(f.getFailArmyInfo,e,t)},searchSong:function(e,t){return e=Object(u.a)({},e,{aggr:"1",cr:"1",flag_qc:"0",p:"1",n:"30"}),b(f.searchSong,e,t)},getSongToken:function(e,t){return e=Object(u.a)({},e,{format:"json205361747",platform:"yqq",cid:"205361747",filename:"C400".concat(e.songmid,".m4a"),guid:"126548448"}),b(f.getSongToken,e,t)}},y=function(e){return{type:"CHANGE_SONG_STATUS",status:e}},O=function(e){return e.percent=e.percent||0,{type:"PLAY_SONG",song:e}},E=function(e){return{type:"REPLACE_PLAY_LIST",list:e}},j=function(e){return{type:"DELETE_SONG_FROM_PLAY_LIST",id:e}},N=function(){return{type:"DELETE_ALL"}},S=function(e){return e.songList=e.songList||[],{type:"SET_FAIL_ARMY_INFO",info:e}},k=function(e){return{type:"SET_SHOW_PLAY_LIST",isShow:e}},C=function(e){return{type:"SET_SHOW_PLAY_BAR",isShow:e}},_={storage:{get:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=t?localStorage:sessionStorage,a=e.split("."),i=a.shift(),s=n.getItem(i),r=null;try{if("object"!=typeof(r=JSON.parse(s)))throw"Not an object!"}catch(c){return a.length?null:s}for(;a.length&&r;)r=r[a.shift()];return r},set:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){var a=n?localStorage:sessionStorage,i=e.split("."),s=i.shift();if(!i.length)return"object"===typeof t&&(t=JSON.stringify(t)),void a.setItem(s,t);var r=a.getItem(s),c=null;if(r)try{if("object"!=typeof(c=JSON.parse(r)))throw"Not an object!"}catch(u){throw"storage.set: key "+s+" \u5df2\u88ab\u5360\u7528\u5e76\u4e14\u4e0d\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u65e0\u6cd5\u4e3a\u5176\u8bbe\u7f6e\u5c5e\u6027\u503c"}for(var o=c=c||{};i.length>1;){var l=i.shift();o[l]=o[l]||{},o=o[l]}o[i[0]]=t,a.setItem(s,JSON.stringify(c))}},remove:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&(t?localStorage:sessionStorage).removeItem(e)},clear:function(){(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?localStorage:sessionStorage).clear()}},changeSong:function(e,t,n,a,i){var s=e.findIndex(function(e){return e.id===t}),r={};function c(){r=a?e[Number(s)+1]||e[0]:e[Number(s)-1]||e[e.length-1]}switch(n){case"RANDOM":var o=parseInt(Math.random()*e.length);r=e[o];break;case"SINGLE_CYCLE":i?r=e[s]:c();break;case"LIST_CYCLE":default:c()}return r},spliceAlbumUrl:function(e){var t=(e=e.toString()).substring(e.length-2,e.length).replace(/^0/,"");return"http://imgcache.qq.com/music/photo/album_300/".concat(t,"/300_albumpic_").concat(e,"_0.jpg")},spliceSongUrl:function(e,t){return"http://ws.stream.qqmusic.qq.com/C400".concat(e,".m4a?fromtag=0&guid=126548448&vkey=").concat(t)}},I=function(e){return function(t,n){v.searchSong(e).then(function(e){var n=JSON.parse(e.substring(9,e.length-1));t({type:"SET_SEARCH_list",list:n.data.song.list})}).catch(function(e){console.log(e)})}},L=function(e){return function(t,n){v.getFailArmyInfo(e).then(function(e){var n=JSON.parse(e.substring(13,e.length-1));console.log(n),t({type:"SET_FAIL_ARMY_SONG_LIST",list:n.cdlist[0].songlist})})}},A=function(e){return function(t,n){v.getSongToken({songmid:e}).then(function(n){var a=JSON.parse(n).data.items[0].vkey,i=_.spliceSongUrl(e,a);t(function(e){return{type:"SET_SONG_URL",songUrl:e}}(i))})}},w=n(29),T=n.n(w),M=n(17),P=n.n(M),x=n(30),U=n.n(x),Y=n(31),q=n.n(Y),G=n(32),R={currentSong:{songname:"\u970d\u5143\u7532",author:"\u5468\u6770\u4f26",singer:[{name:"\u5468\u6770\u4f26"}],albumid:14536,albumImg:n.n(G).a,songUrl:"",lyrics:"",id:0,interval:278,percent:0,isPlaying:!1,songorig:"\u970d\u5143\u7532",songmid:"002HeqcH2GMiOL"},songList:[{songname:"again",singer:[{name:"YUI"}],albumid:10386,author:"YUI",albumImg:P.a,songUrl:U.a,lyrics:"",id:1,interval:257,percent:0,isPlaying:!1,songorig:"\u300a\u94a2\u4e4b\u70bc\u91d1\u672f\u5e08\u300b\u4e3b\u9898\u66f2",songmid:"001myQ3z0O0lyT"},{songname:"GLORIA",singer:[{name:"YUI"}],albumid:10386,author:"YUI",albumImg:P.a,songUrl:q.a,lyrics:"",id:2,interval:257,percent:0,isPlaying:!1,songorig:"GLORIA",songmid:"001myQ3z0O0lyT"}],failArmyInfo:{},searchList:[],showPlayList:!1,showPlayBar:!0,playMode:"LIST_CYCLE"};R.songList.unshift(R.currentSong);var D=Object(m.c)(p),H=Object(m.d)(D,R,Object(m.a)(h.a));H.subscribe(function(){console.log(H.getStates())})(),console.log(H.getState());var F=T()();F.location;F.listen(function(e,t){console.log(t,e.pathname,e.state)})();var V=n(2),B=n(3),W=n(5),J=n(4),$=n(6),z=(n(52),n(54),n(82)),Q=function(e){function t(){return Object(V.a)(this,t),Object(W.a)(this,Object(J.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(B.a)(t,[{key:"back",value:function(){console.log(F),F.go(-1)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"header-left"},i.a.createElement("button",{onClick:function(){return e.back()}}))}}]),t}(i.a.Component),X=function(e){function t(e){var n;return Object(V.a)(this,t),(n=Object(W.a)(this,Object(J.a)(t).call(this,e))).state={activeIndex:1},n}return Object($.a)(t,e),Object(B.a)(t,[{key:"active",value:function(e){this.setState({activeIndex:e})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"com-header",style:{backgroundColor:this.props.bgColor}},this.props.left?this.props.left:i.a.createElement(Q,null),i.a.createElement("div",{className:"tab-row"},i.a.createElement("div",{className:"item list ".concat(0!=this.state.activeIndex?"no-active":""),onClick:function(){e.active(0)}}),i.a.createElement("div",{className:"item main ".concat(1!=this.state.activeIndex?"no-active":""),onClick:function(){e.active(1)}}),i.a.createElement(z.a,{className:"item search ".concat(2!=this.state.activeIndex?"no-active":""),onClick:function(){e.active(2)},to:"/search"})),this.props.right)}}]),t}(i.a.Component),K=n(34),Z=n.n(K),ee=(n(58),n(60),function(e){function t(e){var n;return Object(V.a)(this,t),(n=Object(W.a)(this,Object(J.a)(t).call(this,e))).state={swiperID:"",paginateID:""},n}return Object($.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){new Z.a(this.swiperID,{pagination:{el:this.paginateID},autoplay:!0,speed:300})}},{key:"render",value:function(){var e=this,t=this.props.list;return i.a.createElement("div",{className:"com-banner"},i.a.createElement("div",{className:"swiper-container",ref:function(t){return e.swiperID=t}},i.a.createElement("div",{className:"swiper-wrapper"},t.map(function(e,t){return i.a.createElement("div",{key:"img"+t,className:"swiper-slide"},i.a.createElement("img",{src:e,alt:""}))})),i.a.createElement("div",{className:"swiper-pagination banner-pagination",ref:function(t){return e.paginateID=t}})))}}]),t}(i.a.Component)),te=function(e){function t(){return Object(V.a)(this,t),Object(W.a)(this,Object(J.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"gard-title"},i.a.createElement("p",null,this.props.title),i.a.createElement("span",{className:"read-more"},"\u66f4\u591a>>"))}}]),t}(i.a.Component),ne=n(7),ae=function(e){function t(){var e,n;Object(V.a)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(W.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(i)))).goInfo=function(){n.props.dispatch(S(n.props.data)),n.props.dispatch(L({disstid:n.props.data.dissid}))},n}return Object($.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"gard-item",onClick:this.goInfo},i.a.createElement(z.a,{to:Object(u.a)({pathname:"/dissInfo"},this.props.data)},i.a.createElement("div",{className:"pic-box"},i.a.createElement("img",{src:this.props.data.imgurl,alt:""})),i.a.createElement("p",{className:"pic-message"},this.props.data.dissname)))}}]),t}(i.a.Component),ie=Object(ne.b)(function(e,t){return Object.assign(e,t)})(ae),se=function(e){function t(){return Object(V.a)(this,t),Object(W.a)(this,Object(J.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.list;return i.a.createElement("div",{className:"gard-box"},i.a.createElement(te,{title:this.props.title}),i.a.createElement("div",{className:"gard-row"},e.map(function(e,t){return i.a.createElement(ie,{key:"gard"+t,data:e})})))}}]),t}(i.a.Component),re=n(35),ce=n.n(re),oe=n(36),le=n.n(oe),ue=n(37),pe=n.n(ue),me=function(e){function t(e){var n;return Object(V.a)(this,t),(n=Object(W.a)(this,Object(J.a)(t).call(this,e))).state={bannerList:[ce.a,le.a,pe.a],recommendTitle:"\u63a8\u8350\u6b4c\u5355",newMusicTitle:"\u6700\u65b0\u97f3\u4e50"},n}return Object($.a)(t,e),Object(B.a)(t,[{key:"componentWillMount",value:function(){var e;this.props.dispatch(function(t,n){v.getFailArmy(e).then(function(e){var n=JSON.parse(e.substring(18,e.length-1));t({type:"SET_FAIL_ARMY",list:n.data.list})})})}},{key:"render",value:function(){return i.a.createElement("div",{className:"home-page"},i.a.createElement(X,{left:i.a.createElement("div",null)}),i.a.createElement(ee,{list:this.state.bannerList}),i.a.createElement(se,{list:this.props.failArmy,title:this.state.recommendTitle}))}}]),t}(i.a.Component),he=Object(ne.b)(function(e,t){return Object.assign(e,t)})(me),ge=(n(63),function(e){function t(){return Object(V.a)(this,t),Object(W.a)(this,Object(J.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"mine-page"},i.a.createElement("h1",{className:"title"},"mine page"))}}]),t}(i.a.Component)),fe=(n(65),function(e){function t(){return Object(V.a)(this,t),Object(W.a)(this,Object(J.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(B.a)(t,[{key:"componentWillReceiveProps",value:function(){this.props.isPlaying?this.refs.songImg.style.animationPlayState="running":this.refs.songImg.style.animationPlayState="paused"}},{key:"render",value:function(){return i.a.createElement("div",{className:"disc"},i.a.createElement("img",{ref:"songImg",src:this.props.albumImg,alt:""}))}}]),t}(i.a.Component)),de=function(e){function t(){return Object(V.a)(this,t),Object(W.a)(this,Object(J.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"link-bar"},i.a.createElement("span",{className:"link-like"}),i.a.createElement("span",{className:"link-download"}),i.a.createElement("span",{className:"link-comment"}),i.a.createElement("span",{className:"link-more"}))}}]),t}(i.a.Component),be=function(e){function t(e){var n;return Object(V.a)(this,t),(n=Object(W.a)(this,Object(J.a)(t).call(this,e))).openMenu=function(){n.props.dispatch(k(!0))},n.state={modeList:["LIST_CYCLE","RANDOM","SINGLE_CYCLE"],showMenu:!1},n}return Object($.a)(t,e),Object(B.a)(t,[{key:"play",value:function(){console.log(this.props.audio.error),this.props.currentSong.isPlaying?this.props.audio.$pause():this.props.audio.$play()}},{key:"changeMode",value:function(){var e=this.state.modeList.indexOf(this.props.playMode),t=this.state.modeList[Number(e)+1]||this.state.modeList[0];this.props.dispatch({type:"CHANGE_PLAY_MODE",mode:t})}},{key:"lastSong",value:function(){var e=_.changeSong(this.props.songList,this.props.currentSong.id,this.props.playMode,!1,!1);this.props.dispatch(O(e))}},{key:"nextSong",value:function(){var e=_.changeSong(this.props.songList,this.props.currentSong.id,this.props.playMode,!0,!1);this.props.dispatch(O(e))}},{key:"render",value:function(){var e=this,t="base play-mode ";switch(this.props.playMode){case"LIST_CYCLE":t+="loop-list";break;case"SINGLE_CYCLE":t+="loop-one";break;default:t+="random"}return i.a.createElement("div",{className:"play-ctrl"},i.a.createElement("span",{className:t,onClick:function(){e.changeMode()}}),i.a.createElement("span",{className:"base last-icon",onClick:function(){e.lastSong()}}),i.a.createElement("span",{className:"base play-icon ".concat(this.props.currentSong.isPlaying?"pause":"play"),onClick:function(){e.play()}}),i.a.createElement("span",{className:"base next-icon",onClick:function(){e.nextSong()}}),i.a.createElement("span",{className:"base menu-icon",onClick:this.openMenu}))}}]),t}(i.a.Component),ve=Object(ne.b)(function(e,t){return Object.assign(e,t)})(be),ye=function(e){function t(){return Object(V.a)(this,t),Object(W.a)(this,Object(J.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"player-header"},i.a.createElement("div",{className:"back-icon",onClick:this.props.back}),i.a.createElement("div",{className:"content"},i.a.createElement("p",{className:"title"},this.props.name),i.a.createElement("span",{className:"text"},this.props.author.map(function(e){return e.name+" "}))),i.a.createElement("div",{className:"share"}))}}]),t}(i.a.Component),Oe=function(){var e,t,n=[];return e=function(e,t){n[e]||(n[e]=[]),n[e].push(t)},t=function(){var e=Array.prototype.shift.call(arguments);if(!n[e]||0===n[e].length)return!1;for(var t in n[e])n[e][t].apply(this,arguments)},{list:n,$on:e,$emit:t}}(),Ee=function(e){function t(e){var n;return Object(V.a)(this,t),(n=Object(W.a)(this,Object(J.a)(t).call(this,e))).state={value:0,percent:n.props.percent,maxLength:1e3},n}return Object($.a)(t,e),Object(B.a)(t,[{key:"transformTime",value:function(e){return e?(t=parseInt(e/60)>9?parseInt(e/60):"0"+parseInt(e/60),n=(e%60).toFixed(0)>9?(e%60).toFixed(0):"0"+(e%60).toFixed(0),"".concat(t,":").concat(n)):"00:00";var t,n}},{key:"transformValue",value:function(e,t){return e/t*this.state.maxLength}},{key:"handleChange",value:function(e){var t=e.target.value,n=e.target.value/this.state.maxLength*this.props.interval;console.log(t),Oe.$emit("audioPercent",{value:t,percent:n})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"progress-bar"},i.a.createElement("span",{className:"start-time"},this.transformTime(this.props.percent)),i.a.createElement("input",{type:"range",max:this.state.maxLength,min:"0",value:this.transformValue(this.props.percent,this.props.interval),onChange:function(t){e.handleChange(t)}}),i.a.createElement("span",{className:"end-time"},this.transformTime(this.props.interval)))}}]),t}(i.a.Component),je=Object(ne.b)(function(e,t){return{state:e,props:t}})(Ee),Ne=function(e){function t(){return Object(V.a)(this,t),Object(W.a)(this,Object(J.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(B.a)(t,[{key:"componentWillMount",value:function(){console.log("init"),this.props.dispatch(C(!1))}},{key:"back",value:function(){F.go(-1),this.props.dispatch(C(!0))}},{key:"render",value:function(){var e=_.spliceAlbumUrl(this.props.albumid),t={backgroundImage:'url("'.concat(e,'")')};return i.a.createElement("div",{className:"player-page"},i.a.createElement("div",{className:"bg-filter",style:t}),i.a.createElement(ye,{name:this.props.songname,author:this.props.singer,back:this.back.bind(this)}),i.a.createElement("div",{className:"tab-page"},i.a.createElement(fe,{isPlaying:this.props.isPlaying,albumImg:e})),i.a.createElement(de,null),i.a.createElement(je,{percent:this.props.percent,interval:this.props.interval}),i.a.createElement(ve,null))}}]),t}(i.a.Component),Se=Object(ne.b)(function(e,t){return e.currentSong})(Ne),ke=(n(67),function(e){function t(){return Object(V.a)(this,t),Object(W.a)(this,Object(J.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(B.a)(t,[{key:"back",value:function(){F.go(-1)}},{key:"clean",value:function(){this.props.clean()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"com-search"},i.a.createElement("div",{className:"back",onClick:function(t){e.back(t)}}),i.a.createElement("input",{className:"search-input",type:"text",value:this.props.value,onChange:function(t){e.props.handleChange(t)}}),i.a.createElement("div",{className:"clean",onClick:function(t){e.clean(t)}},"X"))}}]),t}(i.a.Component)),Ce=Object(ne.b)(function(e,t){return Object.assign(e,t)})(ke),_e=(n(69),function(e){function t(e){var n;return Object(V.a)(this,t),(n=Object(W.a)(this,Object(J.a)(t).call(this,e))).play=function(e){n.props.clickSong(e)},n}return Object($.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this,t=this.props.searchList;return i.a.createElement("ul",{className:"list-grid"},t.map(function(t,n){return i.a.createElement("li",{key:n,className:"list-item",onClick:e.play.bind(e,t)},i.a.createElement("div",{className:"content"},i.a.createElement("p",{className:"name"},t.songname),i.a.createElement("span",null,t.singer.map(function(e){return e.name}),"-",t.songname)),i.a.createElement("div",{className:"player-button"}),i.a.createElement("div",{className:"more"}))}))}}]),t}(i.a.Component)),Ie=Object(ne.b)(function(e,t){return Object.assign(e,t)})(_e),Le=(n(26),function(e){function t(e){var n;return Object(V.a)(this,t),(n=Object(W.a)(this,Object(J.a)(t).call(this,e))).chooseHistory=function(e){console.log(e),n.props.chooseHistory(e)},n}return Object($.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"search-history"},i.a.createElement("p",{className:"title"},"\u641c\u7d22\u5386\u53f2"),this.props.list.map(function(t,n){return i.a.createElement("button",{className:"history-btn",key:"historyBtn"+n,onClick:e.chooseHistory.bind(e,t)},t)}))}}]),t}(i.a.Component)),Ae=function(e){function t(e){var n;return Object(V.a)(this,t),(n=Object(W.a)(this,Object(J.a)(t).call(this,e))).chooseHistory=function(e){console.log(e),n.setState({inputValue:e}),n.props.dispatch(I({w:e}))},n.saveSearchValue=function(e){var t=_.storage.get("searchHistory")||[];t.indexOf(e)>-1||(t.length>20?(t.shift(),t.unshift(e)):t.unshift(e),_.storage.set("searchHistory",t),n.setState({historyList:_.storage.get("searchHistory")}))},n.handleChange=function(e){n.setState({inputValue:e.target.value}),""!=n.state.inputValue&&(clearTimeout(n.state.searchTimeOut),n.setState({searchTimeOut:setTimeout(function(){n.saveSearchValue(n.state.inputValue),n.props.dispatch(I({w:n.state.inputValue}))},2e3)}))},n.clean=function(){n.setState({inputValue:""})},n.clickSong=function(e){console.log(e),n.props.dispatch(O(e))},n.state={inputValue:"",historyList:_.storage.get("searchHistory")||[],searchTimeOut:null},n}return Object($.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"search-page"},i.a.createElement(Ce,{value:this.state.inputValue,handleChange:this.handleChange,clean:this.clean}),this.state.inputValue?null:i.a.createElement(Le,{list:this.state.historyList,chooseHistory:this.chooseHistory}),i.a.createElement("div",{className:"result-title"},i.a.createElement("span",null,"\u5355\u66f2"),i.a.createElement("button",null,"\u64ad\u653e\u5168\u90e8")),i.a.createElement(Ie,{clickSong:this.clickSong}))}}]),t}(i.a.Component),we=Object(ne.b)(function(e,t){return Object.assign(e,t)})(Ae),Te=function(e){function t(e){var n;return Object(V.a)(this,t),(n=Object(W.a)(this,Object(J.a)(t).call(this,e))).canPlay=function(){console.log("is canplay"),n.refs.audio.$play()},n.error=function(e){console.error(e),n.refs.audio.pause(),n.props.dispatch(y(!1))},n.getSongUrl=function(){n.props.songUrl||n.props.dispatch(A(n.props.songmid))},n}return Object($.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.refs.audio.$play=function(){if(e.refs.audio.error)return!1;e.setState({playCtrl:!0}),e.refs.audio.play(),e.props.dispatch(y(!0))},this.refs.audio.$pause=function(){if(e.refs.audio.error)return!1;e.refs.audio.pause(),e.props.dispatch(y(!1))},this.props.dispatch({type:"INIT_AUDIO",audio:this.refs.audio}),Oe.$on("audioPercent",function(t){e.refs.audio.currentTime=t.percent}),this.props.dispatch(A(e.props.songmid))}},{key:"ended",value:function(){console.log("is end")}},{key:"updateTime",value:function(e){this.props.dispatch({type:"CHANGE_PERCENT",percent:e.target.currentTime.toFixed(1)})}},{key:"componentWillUpdate",value:function(){this.getSongUrl()}},{key:"render",value:function(){var e=this;return i.a.createElement("audio",{ref:"audio",className:"common-audio",volume:"50",src:this.props.songUrl,onError:this.error,onCanPlay:this.canPlay,onTimeUpdate:function(t){e.updateTime(t)},onEnded:function(t){e.ended(t)}})}}]),t}(i.a.Component),Me=Object(ne.b)(function(e,t){return e.currentSong})(Te),Pe=(n(72),function(e){function t(e){var n;return Object(V.a)(this,t),(n=Object(W.a)(this,Object(J.a)(t).call(this,e))).deleteAll=function(){n.props.dispatch(N())},n.hidden=function(){console.log("hidden"),n.props.dispatch(k(!1))},n.deleteOne=function(e){console.log(e),n.props.dispatch(j(e.id))},n.touchMove=function(e){console.log(e),e.preventDefault(),e.stopPropagation()},n.state={noDataMsg:"\u256e(\u256f3\u2570)\u256d\u5217\u8868\u7a7a\u7a7a\u5982\u4e5f\uff0c\u5feb\u53bb\u6dfb\u52a0\u559c\u6b22\u7684\u6b4c\u66f2\u5427~"},n}return Object($.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.refs.scroll.addEventListener("touchmove",this.touchMove,{passive:!1,capture:!1})}},{key:"render",value:function(){var e=this,t=this.props.songList;return i.a.createElement("div",{className:"play-list-model ".concat(this.props.showPlayList?"":"hidden-play-list-model"),ref:"scroll"},i.a.createElement("div",{className:"masker",onClick:this.hidden}),i.a.createElement("div",{className:"play-list"},i.a.createElement("div",{className:"list-title"},i.a.createElement("div",{className:"title"},"\u8fd9\u662f\u6807\u9898"),i.a.createElement("div",{className:"delete",onClick:this.deleteAll})),i.a.createElement("div",{className:"list-box",onTouchMove:this.touchMove},0===t.length?i.a.createElement("div",{className:"no-song"},this.state.noDataMsg):t.map(function(t,n){return i.a.createElement("div",{className:"list-item",key:"play-item"+n},i.a.createElement("span",{className:"song-name"},t.songname),i.a.createElement("span",{className:"singer-name"},t.singer.map(function(e){return e.name+" "}),"-",t.songorig),i.a.createElement("span",{className:"delete",onClick:e.deleteOne.bind(e,t)},"X"))}))))}}]),t}(i.a.Component)),xe=Object(ne.b)(function(e,t){return Object.assign(e,t)})(Pe),Ue=(n(74),function(e){function t(e){var n;return Object(V.a)(this,t),(n=Object(W.a)(this,Object(J.a)(t).call(this,e))).goSearch=function(){F.push("/search")},n.back=function(){F.go(-1)},n}return Object($.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"diss-header",style:this.props.style},i.a.createElement("div",{className:"back",onClick:this.back}),i.a.createElement("div",{className:"title"},this.props.title),i.a.createElement("div",{className:"search",onClick:this.goSearch}))}}]),t}(i.a.Component)),Ye=function(e){function t(e){return Object(V.a)(this,t),Object(W.a)(this,Object(J.a)(t).call(this,e))}return Object($.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"diss-card"},i.a.createElement("div",{className:"diss-img"},i.a.createElement("div",{className:"listen-count"},this.props.listennum),i.a.createElement("img",{src:this.props.imgurl,alt:""})),i.a.createElement("div",{className:"diss-content"},i.a.createElement("p",{className:"diss-title"},this.props.dissname),i.a.createElement("p",{className:"diss-author"},this.props.creator&&this.props.creator.name)))}}]),t}(i.a.Component),qe=function(e){function t(e){return Object(V.a)(this,t),Object(W.a)(this,Object(J.a)(t).call(this,e))}return Object($.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this,t=this.props.list;return i.a.createElement("div",{className:"diss-list"},i.a.createElement("div",{className:"list-title"},i.a.createElement("div",{className:"play-all",onClick:this.props.playAll},"\u64ad\u653e\u5168\u90e8"),i.a.createElement("div",{className:"collect"},"+ \u6536\u85cf\uff08181.9\u4e07\uff09")),t.map(function(t,n){return i.a.createElement("div",{className:"list-item",key:"listItem"+n},i.a.createElement("div",{className:"content",onClick:e.props.playSong.bind(e,t)},i.a.createElement("p",null,t.songname),i.a.createElement("span",null,t.singer.map(function(e){return e.name+" "})," - ",t.songorig)),i.a.createElement("div",{className:"play-btn",onClick:e.props.playSong}),i.a.createElement("div",{className:"more"}))}))}}]),t}(i.a.Component),Ge=function(e){function t(e){var n;return Object(V.a)(this,t),(n=Object(W.a)(this,Object(J.a)(t).call(this,e)))._setWheelBgtcMainTonal=function(e,t){e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0);for(var a=n.getImageData(0,0,t.width,t.height).data,i=0,s=0,r=0,c=0;c<t.height;c++)for(var o=0;o<t.width;o++)i+=a[4*(t.width*c+o)],s+=a[4*(t.width*c+o)+1],r+=a[4*(t.width*c+o)+2];return i/=t.width*t.height,s/=t.width*t.height,r/=t.width*t.height,((i=Math.round(i))<<16|(s=Math.round(s))<<8|(r=Math.round(r))).toString(16)},n.playSong=function(e){n.props.dispatch(O(e))},n.playAll=function(){n.props.dispatch(E(n.props.failArmyInfo.songList)),n.props.dispatch(O(n.props.failArmyInfo.songList[0]))},n.more=function(){},n.state={bgColor:"#ccc"},n}return Object($.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){var e=this.refs.canvas,t=this.refs.img;this.setState({bgColor:"#"+this._setWheelBgtcMainTonal(e,t)})}},{key:"render",value:function(){var e=this.props.failArmyInfo,t=this.props.failArmyInfo.songList;return i.a.createElement("div",{className:"diss-info",style:{backgroundColor:this.state.bgColor}},i.a.createElement(Ue,{title:"\u6b4c\u5355",style:{backgroundColor:this.state.bgColor}}),i.a.createElement(Ye,e),i.a.createElement(qe,{list:t,playAll:this.playAll,playSong:this.playSong}),i.a.createElement("canvas",{ref:"canvas",style:{display:"none"}}),i.a.createElement("img",{ref:"img",src:e.imgurl,style:{display:"none"},alt:""}))}}]),t}(i.a.Component),Re=Object(ne.b)(function(e,t){return Object.assign(e,t)})(Ge),De=(n(76),n(78),function(e){function t(){var e,n;Object(V.a)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(W.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(i)))).openMenu=function(){console.log("openMenu"),n.props.dispatch(k(!0))},n}return Object($.a)(t,e),Object(B.a)(t,[{key:"play",value:function(){console.log("init",this.props.audio.error),this.props.currentSong.isPlaying?(this.props.audio.pause(),this.props.dispatch(y(!1))):(this.props.audio.play(),this.props.dispatch(y(!0)))}},{key:"goPage",value:function(){this.props.history.push("/player")}},{key:"render",value:function(){var e=this,t=this.props.currentSong,n=_.spliceAlbumUrl(t.albumid);return i.a.createElement("div",{className:"player-bar",style:{display:this.props.showPlayBar?"flex":"none"}},i.a.createElement("img",{className:"song-img",src:n,alt:"",onClick:function(){e.goPage()}}),i.a.createElement("div",{className:"song-info"},i.a.createElement("span",{className:"song-name"},t.songname),i.a.createElement("span",{className:"song-author"},t.singer.map(function(e){return e.name+" "}))),i.a.createElement("div",{className:"player-button ".concat(this.props.currentSong.isPlaying?"pause":"play"),onClick:function(){e.play()}}),i.a.createElement("div",{className:"menu-icon",onClick:this.openMenu}))}}]),t}(i.a.Component)),He=Object(ne.b)(function(e,t){return Object.assign(e,t)})(De);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(ne.a,{store:H},i.a.createElement(function(){return i.a.createElement(c.a,null,i.a.createElement("div",{className:"route-view"},i.a.createElement(o.a,{path:"/",exact:!0,component:he}),i.a.createElement(o.a,{path:"/mine",component:ge}),i.a.createElement(o.a,{path:"/player",component:Se}),i.a.createElement(o.a,{path:"/search",component:we}),i.a.createElement(o.a,{path:"/dissInfo",component:Re}),i.a.createElement(He,null),i.a.createElement(Me,null),i.a.createElement(xe,null)))},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[39,2,1]]]);
//# sourceMappingURL=main.b30a88b4.chunk.js.map